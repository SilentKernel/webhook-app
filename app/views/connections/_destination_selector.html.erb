<%= turbo_frame_tag "destination_selector" do %>
  <% if destinations.any? %>
    <div class="flex gap-2 items-end">
      <div class="flex-1">
        <%= select_tag "connection[destination_id]",
            options_for_select(destinations.map { |d| [d.name, d.id] }, selected_id),
            include_blank: "Select a destination...",
            class: "select select-bordered w-full",
            required: true,
            data: { connection_form_target: "destinationSelect", action: "connection-form#destinationChanged" } %>
      </div>
      <%= link_to new_modal_destinations_path, class: "btn btn-outline btn-sm", data: { turbo_frame: "modal" } do %>
        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" />
        </svg>
        New
      <% end %>
      <%= link_to "#", class: "btn btn-ghost btn-sm hidden", target: "_blank", data: { connection_form_target: "destinationEditLink" } do %>
        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
        </svg>
        Edit
      <% end %>
    </div>
  <% else %>
    <div class="alert alert-warning">
      <span>No active destinations available.</span>
      <%= link_to new_modal_destinations_path, class: "link", data: { turbo_frame: "modal" } do %>
        Create a destination
      <% end %>
    </div>
  <% end %>
<% end %>
