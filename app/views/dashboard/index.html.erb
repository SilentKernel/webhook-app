<% content_for(:title) { "Dashboard - HookStack" } %>

<div class="grid gap-6">
  <div class="card bg-base-100 shadow-xl">
    <div class="card-body">
      <h2 class="card-title text-2xl">Welcome, <%= current_user.first_name %>!</h2>
      <p class="text-base-content/70">You're logged in to your HookStack dashboard.</p>
    </div>
  </div>

  <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
    <div class="card bg-base-100 shadow-xl">
      <div class="card-body">
        <h3 class="card-title">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4" />
          </svg>
          Organization
        </h3>
        <p class="text-2xl font-bold"><%= @organization.name %></p>
        <p class="text-sm text-base-content/60">
          <%= pluralize(@organization.memberships.count, "member") %>
        </p>
        <div class="card-actions justify-end mt-4">
          <% if owner? %>
            <%= link_to "Settings", settings_path, class: "btn btn-sm btn-outline" %>
          <% end %>
          <%= link_to "View Team", team_index_path, class: "btn btn-sm btn-primary" %>
        </div>
      </div>
    </div>

    <div class="card bg-base-100 shadow-xl">
      <div class="card-body">
        <h3 class="card-title">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
          </svg>
          Your Role
        </h3>
        <div class="flex items-center gap-2">
          <% badge_class = case @membership.role
            when "owner" then "badge-primary"
            when "admin" then "badge-secondary"
            else "badge-ghost"
          end %>
          <span class="badge <%= badge_class %> badge-lg"><%= @membership.role.capitalize %></span>
        </div>
        <p class="text-sm text-base-content/60 mt-2">
          <% if @membership.owner? %>
            You have full access to all organization settings.
          <% elsif @membership.admin? %>
            You can manage team members and invitations.
          <% else %>
            You have read access to team information.
          <% end %>
        </p>
      </div>
    </div>

    <div class="card bg-base-100 shadow-xl">
      <div class="card-body">
        <h3 class="card-title">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
          </svg>
          Quick Stats
        </h3>
        <div class="stats stats-vertical shadow">
          <div class="stat py-2">
            <div class="stat-title">Active Sources</div>
            <div class="stat-value text-lg"><%= @sources_count %></div>
          </div>
          <div class="stat py-2">
            <div class="stat-title">Active Endpoints</div>
            <div class="stat-value text-lg"><%= @destinations_count %></div>
          </div>
          <div class="stat py-2">
            <div class="stat-title">Events (24h)</div>
            <div class="stat-value text-lg"><%= number_with_delimiter(@events_24h_count) %></div>
          </div>
          <div class="stat py-2">
            <div class="stat-title">Success Rate (7d)</div>
            <div class="stat-value text-lg <%= success_rate_color(@success_rate) %>">
              <%= @success_rate ? "#{@success_rate}%" : "â€”" %>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
